# Story 1.12: Post-Install CLAUDE.md Documentation Helper - Context Document

## Story Overview

- **Title**: Post-Install CLAUDE.md Agent Documentation Helper
- **Epic**: 1 (Foundation & Installer)
- **Effort**: 1-2 days (small)
- **Type**: Enhancement
- **Priority**: High (improves user onboarding experience)

## Problem Statement

Users install POEM in their projects but don't know what agents are available. When they ask "who are the agents" in a target repo (like SupportSignal), Claude doesn't have good descriptions because:

1. POEM installation copies framework files to `.poem-core/`
2. But the target project's CLAUDE.md is NOT modified
3. So there's no documentation about POEM agents in the target project

**Example scenario**:
- User runs `npx poem-os install` in SupportSignal project
- Agent slash commands work (`/poem/agents/victor` etc.)
- But when asking Claude "what POEM agents are available?", Claude has no context
- Documentation about what agents do is NOT transferred during installation

## Solution

After `npx poem-os install` completes, display a simple post-install message:

```
‚úÖ POEM installed successfully!

üìù POEM Agent Documentation

   To help Claude understand POEM agents, view:
   .poem-core/docs/claude-md-guide.md

   This file contains a ready-to-use section for your CLAUDE.md
```

**Key principle**: Keep it SIMPLE. Just show instructions, don't make it long/complicated.

## Deliverables

### 1. Create Agent Documentation File

**File**: `packages/poem-core/docs/claude-md-guide.md`

**Purpose**: Pre-written POEM agents section that users can copy into their CLAUDE.md

**Structure**: Include for each agent:
- Agent command name (victor/penny/felix)
- Persona name (Victor/Penny/Felix)
- Role (clear, actionable description)
- When to use
- Key commands
- Primary use

**Agent Descriptions** (from conversation refinement):

#### Victor (Workflow Tester + Capability Query)

- **Persona**: Victor
- **Command**: `/poem/agents/victor`
- **Role**: After each story: tests B72 YouTube workflow end-to-end, prevents regressions, tracks automation progress. Also answers "what can POEM do?" via `*capability-explorer`
- **When to use**: After completing a story, test B72 workflow end-to-end
- **What it does**: Runs YouTube workflow, catches regressions, tracks progress. Also answers "what can POEM do?" via `*capability-explorer`
- **Key commands**:
  - `*validate` - Full validation cycle (60-90 min)
  - `*regression` - Quick regression check (10-15 min)
  - `*progress-report` - Epic progress summary (5-10 min)
  - `*capability-explorer <query>` - Capability query (Story 3.9) - <3s

#### Penny (AI Prompt Assistant)

- **Persona**: Penny
- **Command**: `/poem/agents/penny`
- **Role**: Create, refine, test, and validate AI prompts. Generates schemas, creates mock data, validates prompt structure
- **When to use**: Creating/refining AI prompts, testing with mock data
- **What it does**: Guides prompt creation with schemas, generates test data, validates structure
- **Key commands**:
  - `*new` - Create a new prompt with schema
  - `*refine` - Iteratively improve an existing prompt
  - `*test` - Test a prompt with mock or provided data
  - `*validate` - Validate prompt structure and quality

#### Felix (Cross-Project Bug Reporter)

- **Persona**: Felix (Field Testing Observer)
- **Command**: `/poem/agents/field-tester`
- **Role**: When using POEM in other projects (v-voz, etc.): logs bugs with full context and submits them back to central POEM for triage
- **When to use**: Testing POEM in other projects (v-voz, etc.) and hitting blockers
- **What it does**: Captures context automatically, creates bug reports, submits to central POEM
- **Key commands**:
  - `*log-blocker` - Log a blocker with project context and submit to central POEM
  - `*log-session` - Create quick session notes
  - `*log-status` - Display status of all logged blockers

### 2. Modify Install Script

**File**: Likely `bin/install.js` or similar (need to verify actual location)

**Change**: Add post-install message display after successful installation

**Message format**:
```
‚úÖ POEM installed successfully!

üìù POEM Agent Documentation

   To help Claude understand POEM agents, view:
   .poem-core/docs/claude-md-guide.md

   This file contains a ready-to-use section for your CLAUDE.md
```

**Implementation notes**:
- Display message ONLY on successful installation
- Keep message concise and actionable
- Works for both fresh installs and updates
- Non-intrusive (doesn't block workflow)

## Technical Context

### Installation Structure

From conversation analysis:
- When POEM is installed: `.poem-core/`, `.poem-app/`, `.claude/commands/poem/` are created
- User workspace: `poem/` directory for prompts/schemas
- Target project has its OWN CLAUDE.md (not modified by POEM installation)

**Why This Matters**:
- Agent slash commands work (`/poem/agents/victor` etc.)
- But documentation about what they do is NOT transferred
- This story fixes that by providing ready-to-use documentation

### Current POEM Installation Files

```
.poem-core/
‚îú‚îÄ‚îÄ agents/                    # Agent persona definitions
‚îú‚îÄ‚îÄ tasks/                     # Task workflows
‚îú‚îÄ‚îÄ docs/                      # Documentation
‚îÇ   ‚îî‚îÄ‚îÄ claude-md-guide.md     # NEW: Agent documentation (created by this story)
‚îî‚îÄ‚îÄ poem-core-config.yaml      # Core configuration

.claude/commands/poem/
‚îú‚îÄ‚îÄ agents/                    # Slash command wrappers
‚îÇ   ‚îú‚îÄ‚îÄ victor.md
‚îÇ   ‚îú‚îÄ‚îÄ prompt-engineer.md
‚îÇ   ‚îî‚îÄ‚îÄ field-tester.md
‚îî‚îÄ‚îÄ tasks/                     # Task command wrappers

poem/                          # User workspace
‚îú‚îÄ‚îÄ prompts/
‚îú‚îÄ‚îÄ schemas/
‚îî‚îÄ‚îÄ workflows/
```

## Acceptance Criteria

1. ‚úÖ After installation, user sees post-install message with path to agent documentation
2. ‚úÖ Documentation file exists at `.poem-core/docs/claude-md-guide.md` in installed project
3. ‚úÖ File contains clear descriptions of all 3 POEM agents (Victor, Penny, Felix)
4. ‚úÖ Each agent includes: name, persona, role, when to use, key commands
5. ‚úÖ Format is ready to copy-paste into CLAUDE.md
6. ‚úÖ Works for both fresh installs and updates
7. ‚úÖ Message is clear and non-intrusive

## Reference Documents

- **Installation guide**: `docs/guides/installation-management.md`
- **Current CLAUDE.md with POEM agents section**: `/Users/davidcruwys/dev/ad/poem-os/poem/CLAUDE.md` (lines 386-411)
- **Epic 1 description**: `docs/prd/epic-list.md`
- **Agent definitions**:
  - `.bmad-core/agents/victor.md` (workflow validator)
  - `.bmad-core/agents/penny.md` (prompt engineer)
  - `.bmad-core/agents/felix.md` (field tester)

## Notes from Conversation

- User emphasized keeping it SIMPLE - just show instructions, don't make it long/complicated
- POEM core should have pre-created file with agent overview
- Instructions just tell user to read that file
- No circular dependencies with Story 2
- This is Epic 1 work (installer), not Epic 3 (Penny/prompts)

## Story Context for Bob (SM)

When drafting this story, Bob should:

1. **Focus on user onboarding experience**
   - New POEM users need to discover what agents are available
   - Documentation should be immediately actionable
   - Path to documentation should be obvious

2. **Keep implementation simple**
   - One file: `claude-md-guide.md`
   - One message: Post-install instructions
   - No complex logic or workflows

3. **Ensure documentation is high-quality**
   - Clear descriptions that answer "what does this agent do?"
   - Actionable "when to use" guidance
   - Complete command reference
   - Ready to copy-paste format

4. **Consider user familiarity**
   - Users may be unfamiliar with POEM agents
   - Users may be unfamiliar with slash command patterns
   - Users may not know what POEM can do for them

5. **Make documentation discoverable**
   - Post-install message is critical (only touchpoint)
   - File location should be predictable (`.poem-core/docs/`)
   - File name should be descriptive (`claude-md-guide.md`)

## Dependencies

**Upstream**:
- None (standalone enhancement)

**Downstream**:
- Story 2 will benefit from this (capability explorer can reference installed docs)
- Future stories can assume users know about POEM agents

## Success Metrics

**Qualitative**:
- Users can discover POEM agents without asking "what agents are available?"
- Users know when to use each agent
- Users can find documentation easily

**Quantitative**:
- Time to first agent usage (should decrease)
- User questions about "what agents exist" (should decrease)
- Documentation completeness (100% of agents documented)

## Implementation Strategy

### Phase 1: Create Documentation File

1. Create `packages/poem-core/docs/claude-md-guide.md`
2. Write agent descriptions (Victor, Penny, Felix)
3. Include ready-to-copy markdown sections
4. Add examples and context

### Phase 2: Modify Install Script

1. Locate install script (`bin/install.js` or similar)
2. Add post-install message display
3. Test with fresh install
4. Test with update scenario

### Phase 3: Validation

1. Install POEM in test project
2. Verify message displays
3. Verify documentation file exists
4. Verify content is accurate and complete
5. Test copy-paste into CLAUDE.md

## Example: Target CLAUDE.md Section

This is what the generated `claude-md-guide.md` should help users create:

```markdown
## POEM Agents

POEM includes specialized agents that extend beyond the standard BMAD framework:

| Agent | Persona | Role | Primary Use |
|-------|---------|------|-------------|
| **victor** | Victor | Workflow Validator | Product-level QA that validates stories in context, tracks cumulative progress, and tests against real workflows (B72 YouTube automation) |
| **penny** | Penny | Prompt Engineer | Creates, refines, tests, and validates AI prompts using POEM principles and systematic workflows |
| **field-tester** | Felix | Field Testing Observer | Logs blockers and observations from external POEM installations, submits issues to central POEM for triage |

**Access**: `/poem/agents/{agent-name}`

### Victor (Workflow Validator)

**Commands**:
- `*validate` - Full validation cycle (60-90 min)
- `*regression` - Quick regression check (10-15 min)
- `*progress-report` - Epic progress summary (5-10 min)
- `*capability-explorer <query>` - Capability query (<3s)

**When to use**: After completing a story, test B72 workflow end-to-end

### Penny (Prompt Engineer)

**Commands**:
- `*new` - Create a new prompt with schema
- `*refine` - Iteratively improve an existing prompt
- `*test` - Test a prompt with mock or provided data
- `*validate` - Validate prompt structure and quality

**When to use**: Creating/refining AI prompts, testing with mock data

### Felix (Field Testing Observer)

**Commands**:
- `*log-blocker` - Log a blocker with project context
- `*log-session` - Create quick session notes
- `*log-status` - Display status of all logged blockers

**When to use**: Testing POEM in other projects and hitting blockers
```

## Related Work

- **Epic 1**: Foundation & Installer (this story belongs here)
- **Story 2**: Capability Explorer (will reference this documentation)
- **Epic 3**: Prompt Engineering (Penny agent details)
- **Epic 5**: Workflow Testing (Victor agent details)

## Future Considerations

- Auto-update CLAUDE.md during installation (Epic 8?)
- Interactive agent discovery command
- Agent help system built into slash commands
- Version-specific agent documentation

---

**Last Updated**: 2026-01-30
**Status**: Ready for Story Creation
**Next Step**: Bob (SM) to draft Story 1.12 using this context
