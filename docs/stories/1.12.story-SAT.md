# Story 1.12 - Acceptance Test Guide

## Test Suite Baseline (Before SAT)

- **Executed**: 2026-01-30 11:03:17
- **Results**: 756/756 passing, 0 skipped, 0 failing
- **Story-related failures**: None
- **Status**: ‚úÖ All tests passing

## Quick Summary

**Story**: Post-Install CLAUDE.md Documentation Helper
**Status**: Review
**Test Focus**: Post-install message directing users to POEM agent documentation file (`.poem-core/docs/claude-md-guide.md`)

## Prerequisites

**Before testing, ensure:**

- [ ] Story status is "Review"
- [ ] Node.js 22.x or higher installed
- [ ] NPM 10.x or higher installed
- [ ] Clean test directory for fresh install scenario
- [ ] Existing POEM installation for update scenario

**Environment Setup:**

- Node.js: 22.x LTS
- Working directory: Any directory where you want to test installation
- Test directories needed:
  - Fresh install: `~/test-poem-fresh/` (or any clean directory)
  - Update install: `~/test-poem-update/` (directory with existing POEM installation)

---

## üßë Human Tests (Visual/Manual)

Tests requiring human observation - terminal output, file content, message display.

### Test 1: AC1, AC7 - Post-install message displays with correct path

**What to test**: After installation completes successfully, verify post-install message displays with documentation file path

**Steps**:

1. Open terminal to a clean test directory (e.g., `mkdir ~/test-poem-fresh && cd ~/test-poem-fresh`)
2. Run `npx poem-os install` (fresh installation)
3. Observe terminal output during installation
4. Look for the documentation message section after success message

**Expected Result**:

‚úÖ Terminal displays the following message after installation success:

```
üìù POEM Agent Documentation

   To help Claude understand POEM agents, view:
   .poem-core/docs/claude-md-guide.md

   This file contains a ready-to-use section for your CLAUDE.md
```

- Message appears after main success message
- File path is `.poem-core/docs/claude-md-guide.md` (exact)
- Message uses bold formatting for header ("üìù POEM Agent Documentation")
- File path uses cyan color formatting
- Message is clear and actionable
- Message does not block workflow (no user input required)

**Evidence**:

- Terminal screenshot showing post-install message
- Message appears after "Next steps" section
- Formatting is consistent with success message style

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test 2: AC2 - Documentation file exists at expected path

**What to test**: Documentation file is created in installed project at `.poem-core/docs/claude-md-guide.md`

**Steps**:

1. Navigate to test installation directory (from Test 1)
2. Check if `.poem-core/docs/` directory exists
3. Check if `claude-md-guide.md` file exists in that directory
4. Open the file to verify it's not empty

**Expected Result**:

‚úÖ File structure exists:

- `.poem-core/docs/` directory exists
- `.poem-core/docs/claude-md-guide.md` file exists
- File contains content (not empty)
- File is readable markdown

**Evidence**:

- Output of `ls -la .poem-core/docs/` showing file
- File size > 0 bytes

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test 3: AC3, AC4 - Documentation file contains all 3 agents with required fields

**What to test**: File contains clear descriptions of Victor, Penny, and Felix with all required information

**Steps**:

1. Open `.poem-core/docs/claude-md-guide.md` in text editor
2. Search for "Victor" - verify section exists
3. Search for "Penny" - verify section exists
4. Search for "Felix" - verify section exists
5. For each agent, verify presence of:
   - Agent name
   - Persona description
   - Role description
   - "When to use" guidance
   - Key commands section
   - Command examples

**Expected Result**:

‚úÖ All agents documented with complete information:

**Victor (Workflow Validator)**:
- ‚úÖ Persona: "Victor"
- ‚úÖ Command: `/poem/agents/victor`
- ‚úÖ Role: "Product Integration QA - Multi-Story Context Keeper"
- ‚úÖ When to use: After completing stories, preventing regressions, querying capabilities
- ‚úÖ Key commands: `*validate`, `*regression`, `*progress-report`, `*capability-explorer`
- ‚úÖ Dual purpose explanation (workflow testing + capability query)

**Penny (AI Prompt Assistant)**:
- ‚úÖ Persona: "Penny"
- ‚úÖ Command: `/poem/agents/penny`
- ‚úÖ Role: "Expert Prompt Engineer & Template Architect"
- ‚úÖ When to use: Creating, refining, testing, validating prompts
- ‚úÖ Key commands: `*new`, `*refine`, `*test`, `*validate`

**Felix (Field Testing Observer)**:
- ‚úÖ Persona: "Felix"
- ‚úÖ Command: `/poem/agents/felix`
- ‚úÖ Role: "Field Testing Observer & Issue Reporter"
- ‚úÖ When to use: Testing in external projects, logging blockers
- ‚úÖ Key commands: `*log-blocker`, `*log-session`, `*log-status`

**Evidence**:

- File content includes all required sections
- Each agent has complete information
- Formatting is clear and readable

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test 4: AC5 - Format is copy-paste ready

**What to test**: Documentation section is formatted for easy copy-paste into CLAUDE.md

**Steps**:

1. Open `.poem-core/docs/claude-md-guide.md`
2. Find the "Copy-Paste Ready Section" marker
3. Verify content below marker is well-formatted markdown
4. Look for clear delimiters (horizontal rules `---`)
5. Check that table format is used for agent overview
6. Verify markdown headings are properly structured

**Expected Result**:

‚úÖ Copy-paste ready formatting:

- ‚úÖ Clear section marker: "Copy-Paste Ready Section"
- ‚úÖ Horizontal rules (`---`) mark beginning and end of copy section
- ‚úÖ Agent overview table with columns: Agent, Persona, Role, Primary Use
- ‚úÖ Markdown headings use `##` for agents, `###` for subsections
- ‚úÖ Code blocks use triple backticks for examples
- ‚úÖ No broken markdown syntax
- ‚úÖ Consistent indentation and spacing

**Evidence**:

- Visual inspection of markdown formatting
- Table renders correctly if previewed
- No raw HTML or complex formatting

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test 5: AC6 - Message works for update installations

**What to test**: Post-install message displays when updating existing POEM installation

**Steps**:

1. Navigate to test directory with existing POEM installation (e.g., `cd ~/test-poem-update/`)
2. Verify POEM is already installed (`.poem-core/` directory exists)
3. Run `npx poem-os install` again (update/reinstall)
4. Observe terminal output
5. Look for documentation message after success

**Expected Result**:

‚úÖ Message displays for updates:

- Documentation message appears (same format as fresh install)
- Message is NOT suppressed for updates
- File path is still correct (`.poem-core/docs/claude-md-guide.md`)
- Formatting is consistent

**Evidence**:

- Terminal output showing message during update
- Message appears even though POEM was already installed

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test 6: AC6 - Documentation file is updated during updates

**What to test**: Documentation file is refreshed/updated when running install in existing POEM installation

**Steps**:

1. Continue from Test 5 (update scenario)
2. Check timestamp of `.poem-core/docs/claude-md-guide.md`
3. Verify file content matches latest version
4. Compare with source file in `packages/poem-core/docs/claude-md-guide.md`

**Expected Result**:

‚úÖ Documentation file updated:

- ‚úÖ File exists at `.poem-core/docs/claude-md-guide.md`
- ‚úÖ File modification timestamp is recent (updated during install)
- ‚úÖ File content matches source version

**Evidence**:

- `ls -l .poem-core/docs/claude-md-guide.md` showing recent timestamp
- Content comparison confirms update

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

## ü§ñ Terminal Tests (Scriptable)

Tests using command-line tools - copy-paste ready commands.

### Test A: AC2 - Verify documentation file exists in development

**What to test**: Source documentation file exists in development repository

**Command**:

```bash
ls -lh packages/poem-core/docs/claude-md-guide.md
```

**Expected Output**:

```
-rw-r--r--  1 user  staff   X.XK Jan 30 HH:MM packages/poem-core/docs/claude-md-guide.md
```

(File exists with reasonable size, e.g., > 5KB)

**Validation**:

- ‚úÖ File exists
- ‚úÖ File size is > 5KB (contains substantial content)
- ‚úÖ File has read permissions

**Status**: ‚úÖ Passed

**Notes**: File exists at expected location with 8.5KB size

---

### Test B: AC3 - File contains all 3 agent names

**What to test**: Documentation file mentions all required agents

**Command**:

```bash
grep -E "(Victor|Penny|Felix)" packages/poem-core/docs/claude-md-guide.md | head -10
```

**Expected Output**:

```
(Multiple lines containing "Victor", "Penny", and "Felix")
```

**Validation**:

- ‚úÖ Output contains "Victor"
- ‚úÖ Output contains "Penny"
- ‚úÖ Output contains "Felix"
- ‚úÖ Each agent appears multiple times (in table and sections)

**Status**: ‚úÖ Passed

**Notes**: All three agents found in documentation

---

### Test C: AC4 - File contains command references

**What to test**: File documents key commands for each agent

**Command**:

```bash
grep -E "(\*validate|\*regression|\*progress-report|\*capability-explorer|\*new|\*refine|\*test|\*log-blocker|\*log-session|\*log-status)" packages/poem-core/docs/claude-md-guide.md | wc -l
```

**Expected Output**:

```
11
```

(At least 11 lines containing command references - Victor: 4, Penny: 4, Felix: 3)

**Validation**:

- ‚úÖ Output count is >= 11
- ‚úÖ All key commands are documented

**Status**: ‚úÖ Passed

**Notes**: All 11 key commands found in documentation

---

### Test D: AC5 - File contains copy-paste section marker

**What to test**: File has clear "Copy-Paste Ready Section" marker

**Command**:

```bash
grep -i "copy-paste ready section" packages/poem-core/docs/claude-md-guide.md
```

**Expected Output**:

```
## Copy-Paste Ready Section
```

**Validation**:

- ‚úÖ Marker exists
- ‚úÖ Uses heading format (`##`)

**Status**: ‚úÖ Passed

**Notes**: Copy-paste section marker found

---

### Test E: AC1 - Install script contains documentation message

**What to test**: Install script displays post-install documentation message

**Command**:

```bash
grep -A 4 "POEM Agent Documentation" bin/install.js
```

**Expected Output**:

```
  log('\n' + bold('üìù POEM Agent Documentation') + '\n');
  log('   To help Claude understand POEM agents, view:');
  log('   ' + cyan('.poem-core/docs/claude-md-guide.md'));
  log('');
  log('   This file contains a ready-to-use section for your CLAUDE.md');
```

**Validation**:

- ‚úÖ Message header found
- ‚úÖ File path reference found (`.poem-core/docs/claude-md-guide.md`)
- ‚úÖ Explanation text found
- ‚úÖ Formatting uses `bold()` and `cyan()` helpers

**Status**: ‚úÖ Passed

**Notes**: Documentation message found in install script at lines 1121-1125

---

### Test F: Verify unit tests exist for documentation file

**What to test**: Unit tests were created for the documentation file

**Command**:

```bash
ls -lh packages/poem-core/tests/docs/claude-md-guide.test.ts
```

**Expected Output**:

```
-rw-r--r--  1 user  staff   X.XK Jan 30 HH:MM packages/poem-core/tests/docs/claude-md-guide.test.ts
```

**Validation**:

- ‚úÖ Test file exists
- ‚úÖ File is in correct location
- ‚úÖ File size indicates substantial test coverage

**Status**: ‚úÖ Passed

**Notes**: Test file exists with 21 tests (all passing)

---

### Test G: Run unit tests for documentation file

**What to test**: Unit tests pass for the documentation file

**Command**:

```bash
cd packages/poem-app && npx vitest run tests/unit/../../poem-core/tests/docs/claude-md-guide.test.ts
```

**Expected Output**:

```
‚úì tests/unit/../../poem-core/tests/docs/claude-md-guide.test.ts (21 tests) XXms
  Test Files  1 passed (1)
  Tests       21 passed (21)
```

**Validation**:

- ‚úÖ All tests pass
- ‚úÖ 21 tests executed
- ‚úÖ No failures or errors

**Status**: ‚úÖ Passed

**Notes**: All 21 tests passing (verified in full test suite)

---

## Test Checklist

Copy this checklist to track overall progress:

**Human Tests:**

- [ ] Test 1: Post-install message displays with correct path
- [ ] Test 2: Documentation file exists at expected path
- [ ] Test 3: File contains all 3 agents with required fields
- [ ] Test 4: Format is copy-paste ready
- [ ] Test 5: Message works for update installations
- [ ] Test 6: Documentation file updated during updates

**Terminal Tests:**

- [x] Test A: Source file exists in development
- [x] Test B: File contains all agent names
- [x] Test C: File contains command references
- [x] Test D: File contains copy-paste section marker
- [x] Test E: Install script contains message
- [x] Test F: Unit tests exist
- [x] Test G: Unit tests pass

**Overall Status**: üîÑ In Progress (Human tests pending)

---

## Troubleshooting

### Issue: Post-install message not displayed

**Symptom**: Installation completes but no documentation message appears

**Solution**:
- Verify you're using latest version of POEM (`npx poem-os install`)
- Check installation completed successfully (look for success message first)
- Message appears AFTER success message and "Next steps" section
- Try running install again in verbose mode

### Issue: Documentation file missing after install

**Symptom**: `.poem-core/docs/claude-md-guide.md` does not exist after installation

**Solution**:
- Verify installation completed successfully
- Check if `.poem-core/` directory exists (installation may have failed)
- Check file permissions on target directory
- Re-run installation: `npx poem-os install`

### Issue: File content seems outdated

**Symptom**: Documentation file exists but doesn't match expected content

**Solution**:
- Run `npx poem-os install` again to update files
- POEM installation updates all files, including documentation
- Compare with source: `cat packages/poem-core/docs/claude-md-guide.md` (in POEM repo)

### Issue: Message path doesn't match actual file location

**Symptom**: Message says one path but file is at different path

**Solution**:
- This would be a bug - file should be at `.poem-core/docs/claude-md-guide.md`
- Verify both message content and actual file location
- Report discrepancy if found

---

## Test Results Summary

**Date Tested**: _________________
**Tester**: _________________

**Results**:

- Human Tests: __ / 6 passed
- Terminal Tests: 7 / 7 passed
- Total: __ / 13 passed

**Automated Test Execution Results**:
- ‚úÖ Test A: Passed - Source file exists (8.5KB)
- ‚úÖ Test B: Passed - All agent names found
- ‚úÖ Test C: Passed - All key commands documented
- ‚úÖ Test D: Passed - Copy-paste section marker found
- ‚úÖ Test E: Passed - Install script message found
- ‚úÖ Test F: Passed - Unit tests exist
- ‚úÖ Test G: Passed - All 21 unit tests passing

**Human Tests (Pending Manual Execution)**:
- ‚è≥ Test 1: Post-install message display (REQUIRES: `npx poem-os install` in test directory)
- ‚è≥ Test 2: File existence verification (REQUIRES: Check installed project)
- ‚è≥ Test 3: Agent documentation completeness (REQUIRES: Manual file review)
- ‚è≥ Test 4: Copy-paste format validation (REQUIRES: Visual inspection)
- ‚è≥ Test 5: Update installation message (REQUIRES: Install in existing POEM project)
- ‚è≥ Test 6: File update verification (REQUIRES: Compare timestamps)

**Issues Found**: _________________

**Sign-off**: ‚¨ú Story accepted | ‚¨ú Issues require fixes

---

_Generated by Taylor (SAT Guide Creator) from Story 1.12_
