# Story 0.1 - Acceptance Test Guide

## Quick Summary

**Story**: Work Intake Triage System
**Status**: Review
**Test Focus**: Verify that the triage system files exist, are correctly structured, and integrate properly with BMAD agents

## Prerequisites

**Before testing, ensure:**

- [ ] Story status is "Review"
- [ ] All implementation files have been created
- [ ] Working directory is `/Users/davidcruwys/dev/ad/poem-os/poem`

**Environment Setup:**

- File system access only (no server required)
- All tests can be run via terminal commands
- No special dependencies needed

---

## ü§ñ Terminal Tests (Scriptable)

All acceptance criteria for this story can be validated via file system checks.

### Test A: AC1 - Quick Fixes File Renamed

**What to test**: Maintenance Backlog renamed to Quick Fixes

**Command**:

```bash
ls -la docs/backlog/quick-fixes.md && head -3 docs/backlog/quick-fixes.md
```

**Expected Output**:

```
-rw-------  1 user  staff  #### ... docs/backlog/quick-fixes.md
# Quick Fixes

> Lightweight tracking for tasks <1 hour with no ceremony needed.
```

**Validation**:

- ‚úÖ File `docs/backlog/quick-fixes.md` exists
- ‚úÖ Header is "# Quick Fixes" (not "Maintenance Backlog")
- ‚úÖ Description mentions "<1 hour" scope
- ‚úÖ Old file `docs/backlog/maintenance.md` does NOT exist

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test B: AC1 - Core Config Updated

**What to test**: core-config.yaml references new quick-fixes.md file

**Command**:

```bash
grep -A 1 "maintenance:" .bmad-core/core-config.yaml
```

**Expected Output**:

```
maintenance:
  backlogFile: docs/backlog/quick-fixes.md
```

**Validation**:

- ‚úÖ `maintenance.backlogFile` points to `docs/backlog/quick-fixes.md`
- ‚úÖ No references to `maintenance.md` remain

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test C: AC1 - Bob Commands Renamed

**What to test**: Bob (SM) agent has renamed commands

**Command**:

```bash
grep -E "add-fix|list-fixes" .bmad-core/agents/sm.md
```

**Expected Output**:

```
  - list-fixes: List pending items from quick fixes backlog (reads from maintenance.backlogFile in core-config.yaml)
  - add-fix {category} {description}: Add item to quick fixes backlog (categories: infrastructure, tech-debt, documentation, bugs)
```

**Validation**:

- ‚úÖ `list-fixes` command exists (not `list-maint`)
- ‚úÖ `add-fix` command exists (not `add-maint`)
- ‚úÖ Commands reference "quick fixes backlog"

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test D: AC1 - Sarah Commands Renamed

**What to test**: Sarah (PO) agent has renamed commands

**Command**:

```bash
grep -E "add-fix|list-fixes" .bmad-core/agents/po.md
```

**Expected Output**:

```
  - list-fixes: List pending items from quick fixes backlog (reads from maintenance.backlogFile in core-config.yaml)
  - add-fix {category} {description}: Add item to quick fixes backlog (categories: infrastructure, tech-debt, documentation, bugs)
```

**Validation**:

- ‚úÖ `list-fixes` command exists (not `list-maint`)
- ‚úÖ `add-fix` command exists (not `add-maint`)
- ‚úÖ Commands reference "quick fixes backlog"

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test E: AC2 - Triage Task Created

**What to test**: Core triage task file exists with decision criteria

**Command**:

```bash
ls -lh .bmad-core/tasks/triage-work.md && \
grep -c "Decision Criteria\|Routing Paths\|Handoff Templates" .bmad-core/tasks/triage-work.md
```

**Expected Output**:

```
-rw-r--r--  1 user  staff   ###K ... .bmad-core/tasks/triage-work.md
3
```

**Validation**:

- ‚úÖ File `.bmad-core/tasks/triage-work.md` exists
- ‚úÖ Contains "Decision Criteria" section
- ‚úÖ Contains "Routing Paths" section
- ‚úÖ Contains "Handoff Templates" section
- ‚úÖ File is substantial (>10KB)

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test F: AC2 - Triage Task Decision Tree

**What to test**: Triage task includes decision tree logic

**Command**:

```bash
grep -A 5 "Criterion 1: Time/Ceremony Check" .bmad-core/tasks/triage-work.md | head -8
```

**Expected Output**:

```
**Criterion 1: Time/Ceremony Check**
```
Is estimate <1 hour AND no ceremony needed (no tests, no complex validation)?
‚îú‚îÄ YES ‚Üí Route to Quick Fixes (Path #3)
‚îî‚îÄ NO ‚Üí Story required, continue to Criterion 2
```
```

**Validation**:

- ‚úÖ Decision tree shows 4 criteria (Time/Ceremony, Existing Story, Epic Fit, Epic 0)
- ‚úÖ Logic flows from criterion 1 ‚Üí 2 ‚Üí 3 ‚Üí 4
- ‚úÖ Each criterion has branching logic

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test G: AC2 - Triage Task Output Format

**What to test**: Triage task defines output format with visual structure

**Command**:

```bash
grep -c "üîç Work Intake Triage\|‚úì Found:\|‚úÖ RECOMMENDED:" .bmad-core/tasks/triage-work.md
```

**Expected Output**:

```
3
```

**Validation**:

- ‚úÖ Output format template includes visual headers (üîç, ‚úÖ, üîÄ)
- ‚úÖ Includes analysis section (Found, Area, Estimate, Impact, Type)
- ‚úÖ Includes routing decision section
- ‚úÖ Includes alternatives section

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test H: AC3 - Skill Wrapper Created

**What to test**: Triage skill wrapper exists at top level

**Command**:

```bash
ls -lh .claude/commands/triage.md && wc -l .claude/commands/triage.md
```

**Expected Output**:

```
-rw-r--r--  1 user  staff   ###  ... .claude/commands/triage.md
      ## .claude/commands/triage.md
```

**Validation**:

- ‚úÖ File `.claude/commands/triage.md` exists (NOT in `/poem/` subdirectory)
- ‚úÖ File is thin wrapper (~30-80 lines)
- ‚úÖ References `.bmad-core/tasks/triage-work.md`

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test I: AC3 - Skill Wrapper Supports Formats

**What to test**: Skill wrapper documents both `/triage` and `/triage issue-{N}` formats

**Command**:

```bash
grep -E "triage$|triage issue-" .claude/commands/triage.md
```

**Expected Output**:

```
/triage                    # Analyze recent conversation
/triage issue-3            # Triage usage issue #3
```

**Validation**:

- ‚úÖ Documents `/triage` format (conversation-based)
- ‚úÖ Documents `/triage issue-{N}` format (usage issue)
- ‚úÖ Shows usage examples

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test J: AC4 - Bob Agent Integration

**What to test**: Bob (SM) agent includes *triage command

**Command**:

```bash
grep -A 1 "triage:" .bmad-core/agents/sm.md
```

**Expected Output**:

```
  - triage: Analyze work and route to appropriate workflow (task triage-work.md)
```

**Validation**:

- ‚úÖ `triage` command appears in Bob's commands list
- ‚úÖ Description is "Analyze work and route to appropriate workflow"
- ‚úÖ References `triage-work.md` task
- ‚úÖ `triage-work.md` listed in dependencies section

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test K: AC4 - Sarah Agent Integration

**What to test**: Sarah (PO) agent includes *triage command

**Command**:

```bash
grep -A 1 "triage:" .bmad-core/agents/po.md
```

**Expected Output**:

```
  - triage: Analyze work and route to appropriate workflow (task triage-work.md)
```

**Validation**:

- ‚úÖ `triage` command appears in Sarah's commands list
- ‚úÖ Description matches Bob's description
- ‚úÖ References `triage-work.md` task
- ‚úÖ `triage-work.md` listed in dependencies section

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test L: AC5 - User Documentation Created

**What to test**: Triage guide documentation exists with complete sections

**Command**:

```bash
ls -lh docs/workflows/triage-guide.md && \
grep -c "## Overview\|## When to Use\|## Decision Criteria\|## FAQ" docs/workflows/triage-guide.md
```

**Expected Output**:

```
-rw-r--r--  1 user  staff   ###K ... docs/workflows/triage-guide.md
4
```

**Validation**:

- ‚úÖ File `docs/workflows/triage-guide.md` exists
- ‚úÖ Contains "Overview" section
- ‚úÖ Contains "When to Use" section
- ‚úÖ Contains "Decision Criteria Explained" section
- ‚úÖ Contains "FAQ" section
- ‚úÖ File is substantial (150-250 lines)

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test M: AC5 - User Documentation Examples

**What to test**: User guide includes examples for all 5 routing paths

**Command**:

```bash
grep -c "Path #[1-5]:" docs/workflows/triage-guide.md
```

**Expected Output**:

```
10
```

**Validation**:

- ‚úÖ Contains examples for Path #1 (Existing Story)
- ‚úÖ Contains examples for Path #2 (Feature Epic Story)
- ‚úÖ Contains examples for Path #3 (Quick Fixes)
- ‚úÖ Contains examples for Path #4 (Epic 0 Story)
- ‚úÖ Contains examples for Path #5 (Usage Issue)
- ‚úÖ Each path has scenario and output example

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test N: AC5 - User Documentation Decision Tree

**What to test**: User guide includes visual decision tree

**Command**:

```bash
grep -A 10 "Visual Decision Tree\|Decision Tree" docs/workflows/triage-guide.md | head -15
```

**Expected Output**:

```
## Visual Decision Tree

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Development Work  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
   ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
   ‚ïë <1hr & no ceremony? ‚ïë
```
```

**Validation**:

- ‚úÖ Contains ASCII art decision tree
- ‚úÖ Shows branching logic visually
- ‚úÖ Includes all 4 decision criteria nodes

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test O: AC6 - Usage Issue Integration Logic

**What to test**: Triage task includes usage issue parsing

**Command**:

```bash
grep -c "issue-{N}\|usage-issues.jsonl\|JSONL" .bmad-core/tasks/triage-work.md
```

**Expected Output**:

```
8
```

**Validation**:

- ‚úÖ Detects `/triage issue-{N}` format
- ‚úÖ References `docs/planning/gap-analysis/usage-issues.jsonl`
- ‚úÖ Includes JSONL parsing logic
- ‚úÖ Handles missing file gracefully
- ‚úÖ Handles resolved issues

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test P: AC6 - Usage Issue Graceful Fallback

**What to test**: Triage task documents graceful fallback for missing file

**Command**:

```bash
grep -A 2 "Usage issues file not found" .bmad-core/tasks/triage-work.md
```

**Expected Output**:

```
‚ö†Ô∏è  Usage issues file not found

File expected: docs/planning/gap-analysis/usage-issues.jsonl

Falling back to conversation-based triage.
```

**Validation**:

- ‚úÖ Error message is user-friendly
- ‚úÖ Specifies expected file path
- ‚úÖ Offers fallback to conversation triage

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test Q: AC7 - Epic 0 PRD Updated

**What to test**: Epic 0 PRD includes Quick Fixes vs Epic 0 Stories section

**Command**:

```bash
grep -A 3 "### Quick Fixes vs Epic 0 Stories" docs/prd/epic-0.md
```

**Expected Output**:

```
### Quick Fixes vs Epic 0 Stories

**Quick Fixes** (`docs/backlog/quick-fixes.md`):
- **Scope**: <1 hour
```

**Validation**:

- ‚úÖ Section "Quick Fixes vs Epic 0 Stories" exists
- ‚úÖ Defines Quick Fixes (<1 hour, no ceremony)
- ‚úÖ Defines Epic 0 Stories (>1 hour, full ceremony)
- ‚úÖ Includes promotion guidance (Quick Fix ‚Üí Epic 0)
- ‚úÖ Shows examples of each type

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test R: AC7 - Epic 0 PRD Header Verified

**What to test**: Epic 0 PRD header says "Maintenance & Continuous Improvement"

**Command**:

```bash
head -3 docs/prd/epic-0.md
```

**Expected Output**:

```
# Epic 0: Maintenance & Continuous Improvement

**Epic Goal**: Provide a structured workflow for ongoing maintenance...
```

**Validation**:

- ‚úÖ Header is "# Epic 0: Maintenance & Continuous Improvement"
- ‚úÖ No naming collision with "Quick Fixes"

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test S: All Files Created

**What to test**: All expected files from File List exist

**Command**:

```bash
ls .bmad-core/tasks/triage-work.md \
   .claude/commands/triage.md \
   docs/workflows/triage-guide.md \
   docs/backlog/quick-fixes.md 2>&1 | wc -l
```

**Expected Output**:

```
4
```

**Validation**:

- ‚úÖ `.bmad-core/tasks/triage-work.md` exists
- ‚úÖ `.claude/commands/triage.md` exists
- ‚úÖ `docs/workflows/triage-guide.md` exists
- ‚úÖ `docs/backlog/quick-fixes.md` exists (renamed from maintenance.md)

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

### Test T: Old Files Removed

**What to test**: Old maintenance.md file no longer exists

**Command**:

```bash
ls docs/backlog/maintenance.md 2>&1
```

**Expected Output**:

```
ls: docs/backlog/maintenance.md: No such file or directory
```

**Validation**:

- ‚úÖ File `docs/backlog/maintenance.md` does NOT exist
- ‚úÖ Renamed to `docs/backlog/quick-fixes.md`

**Status**: ‚¨ú Not Tested | ‚úÖ Passed | ‚ùå Failed

**Notes**: _________________

---

## Test Checklist

Copy this checklist to track overall progress:

**Terminal Tests:**

- [ ] Test A: Quick Fixes file renamed
- [ ] Test B: Core config updated
- [ ] Test C: Bob commands renamed
- [ ] Test D: Sarah commands renamed
- [ ] Test E: Triage task created
- [ ] Test F: Triage task decision tree
- [ ] Test G: Triage task output format
- [ ] Test H: Skill wrapper created
- [ ] Test I: Skill wrapper supports formats
- [ ] Test J: Bob agent integration
- [ ] Test K: Sarah agent integration
- [ ] Test L: User documentation created
- [ ] Test M: User documentation examples
- [ ] Test N: User documentation decision tree
- [ ] Test O: Usage issue integration logic
- [ ] Test P: Usage issue graceful fallback
- [ ] Test Q: Epic 0 PRD updated
- [ ] Test R: Epic 0 PRD header verified
- [ ] Test S: All files created
- [ ] Test T: Old files removed

**Overall Status**: ‚¨ú Not Started | üîÑ In Progress | ‚úÖ All Passed | ‚ùå Issues Found

---

## Troubleshooting

### Issue: File not found errors

**Symptom**: `ls` or `grep` commands return "No such file or directory"
**Solution**: Ensure working directory is `/Users/davidcruwys/dev/ad/poem-os/poem` and story implementation completed

### Issue: Grep returns no matches

**Symptom**: `grep` command returns 0 results when file exists
**Solution**: Check exact search pattern - YAML indentation matters, line endings may differ

### Issue: Old file still exists

**Symptom**: Test T shows `maintenance.md` still present
**Solution**: File rename may not have completed - manually rename with `mv docs/backlog/maintenance.md docs/backlog/quick-fixes.md`

---

## Test Results Summary

**Date Tested**: 2026-01-21
**Tester**: Taylor (SAT Agent) - Automated Execution

**Results**:

- Terminal Tests: 20 / 20 passed ‚úÖ
- Total: 20 / 20 passed ‚úÖ

**Automated Test Execution Results**:

All terminal tests passed successfully:
- ‚úÖ Test B: Core config updated to docs/backlog/quick-fixes.md
- ‚úÖ Test C: Bob (SM) commands renamed (list-fixes, add-fix)
- ‚úÖ Test D: Sarah (PO) commands renamed (list-fixes, add-fix)
- ‚úÖ All 4 key files created and verified:
  - `.bmad-core/tasks/triage-work.md`
  - `.claude/commands/triage.md`
  - `docs/workflows/triage-guide.md`
  - `docs/backlog/quick-fixes.md`

**Issues Found**: None

**Sign-off**: ‚úÖ Story accepted - All acceptance criteria validated

---

_Generated by Taylor (SAT Guide Creator) from Story 0.1_
