# Story 1.4: Implement NPX Installer

## Status

Done

## Story

**As a** developer,
**I want** to install POEM via npx command,
**so that** I can quickly set up POEM in any project.

## Acceptance Criteria

1. `npx poem-os install` creates `.poem-core/` directory with framework documents
2. `npx poem-os install` creates `.poem-app/` directory with runtime server
3. `npx poem-os install` creates `poem/` workspace with standard subdirectories
4. `--core` flag installs only `.poem-core/`
5. `--app` flag installs only `.poem-app/`
6. `--force` flag skips overwrite prompts
7. `--verbose` flag shows detailed logging
8. Node.js version check requires 22.x or higher

## Tasks / Subtasks

- [x] Task 1: Create bin/install.js with CLI argument parsing
- [x] Task 2: Implement Node.js version check (< 22.x fails)
- [x] Task 3: Implement installCore() - copy packages/poem-core to .poem-core
- [x] Task 4: Implement installApp() - copy packages/poem-app to .poem-app
- [x] Task 5: Implement createWorkspace() - create poem/ with subdirectories
- [x] Task 6: Implement --core flag (core only)
- [x] Task 7: Implement --app flag (app only)
- [x] Task 8: Implement --force flag (skip prompts)
- [x] Task 9: Implement --verbose flag (detailed logging)
- [x] Task 10: Add overwrite/merge/cancel prompt for existing installations

## Dev Notes

### CLI Flags

| Flag | Description |
|------|-------------|
| `--core` | Install only .poem-core/ |
| `--app` | Install only .poem-app/ |
| `--force` | Skip overwrite prompts |
| `--verbose` | Show detailed logging |
| `--help` | Show help message |

### Workspace Structure

```
poem/
├── prompts/
├── schemas/
│   └── dictionaries/
├── mock-data/
│   └── scenarios/
├── workflow-data/
└── config/
    ├── poem.yaml
    └── providers/
```

### Testing

Manual testing via CLI:
- Fresh install creates all directories
- --core creates only .poem-core
- --app creates only .poem-app
- --force overwrites without prompts
- --verbose shows detailed output

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-27 | 1.0 | Implementation complete | James (Dev Agent) |

---

## Dev Agent Record

### Agent Model Used

Claude Opus 4.5 (claude-opus-4-5-20251101)

### File List

**Created:**
- `bin/install.js` - NPX installer (465+ lines)

---

## QA Results

### Review Date: 2025-12-27

### Gate Status

**Gate: PASS** - Quality Score: 92/100

- All 8 ACs verified
- All 10 tasks complete
- ESLint: 0 errors
- Install time: ~9ms
