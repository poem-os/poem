{
  "templateName": "complete-storyline",
  "dataSource": "storyline.transcript",
  "outputType": "full_storyline_structure",
  "description": "Complete schema for transformed storyline output",
  "outputSchema": {
    "type": "object",
    "required": ["schemaVersion", "metadata", "cast", "styleGuide", "beats"],
    "properties": {
      "schemaVersion": {
        "type": "string",
        "description": "Schema version for output format",
        "example": "2.0.0"
      },
      "metadata": {
        "type": "object",
        "properties": {
          "title": { "type": "string" },
          "projectName": { "type": "string" },
          "totalBeats": { "type": "number" },
          "totalVisualConcepts": { "type": "number" },
          "totalImageVariations": { "type": "number" },
          "totalAnimations": { "type": "number" },
          "totalWords": { "type": "number" },
          "totalDuration": { "type": "number" },
          "generatedAt": { "type": "string", "format": "date-time" }
        }
      },
      "cast": {
        "type": "array",
        "description": "All characters in the story",
        "$ref": "#/definitions/character"
      },
      "styleGuide": {
        "type": "object",
        "description": "Visual style guidelines",
        "properties": {
          "corePhilosophy": { "type": "string" },
          "era": { "type": "string" },
          "setting": { "type": "string" },
          "culturalContext": { "type": "string" },
          "visualInfluences": {
            "type": "array",
            "items": { "type": "string" }
          },
          "colorPalette": {
            "type": "object",
            "properties": {
              "primary": { "type": "array", "items": { "type": "string" } },
              "accent": { "type": "array", "items": { "type": "string" } },
              "backgrounds": { "type": "array", "items": { "type": "string" } }
            }
          },
          "sceneAnchors": { "type": "object" }
        }
      },
      "beats": {
        "type": "array",
        "description": "Narrative broken into beats",
        "items": {
          "type": "object",
          "required": ["id", "timing", "narrative", "visualConcepts"],
          "properties": {
            "id": { "type": "number" },
            "timing": {
              "type": "object",
              "properties": {
                "start": { "type": "string" },
                "end": { "type": "string" },
                "duration": { "type": "number" },
                "startSeconds": { "type": "number" },
                "endSeconds": { "type": "number" }
              }
            },
            "narrative": {
              "type": "object",
              "properties": {
                "text": { "type": "string" },
                "speaker": { "type": "string" }
              }
            },
            "beatLevelDefaults": {
              "type": "object",
              "properties": {
                "sceneAnchor": { "type": "string" },
                "ambiance": { "type": "string" },
                "timeOfDay": { "type": "string" }
              }
            },
            "visualConcepts": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "conceptNumber": { "type": "number" },
                  "description": { "type": "string" },
                  "shotType": {
                    "type": "string",
                    "enum": ["wide", "medium", "close", "ots", "extreme-close"]
                  },
                  "cameraAngle": {
                    "type": "string",
                    "enum": ["eye-level", "high", "low", "dutch"]
                  },
                  "mood": { "type": "string" },
                  "characters": {
                    "type": "array",
                    "items": { "type": "string" }
                  },
                  "attributeOverrides": { "type": "object" },
                  "purpose": { "type": "string" },
                  "duration": { "type": "string" }
                }
              }
            }
          }
        }
      }
    }
  }
}
